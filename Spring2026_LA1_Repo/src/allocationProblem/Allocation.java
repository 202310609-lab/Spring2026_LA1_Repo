package allocationProblem;
import java.util.Arrays;

/**
 * The main Evaluation class for the TSP. It's pretty simple -- given an
 * Individual (ie, a chromosome) and a list of canonical cities, calculate the
 * total distance required to travel to the cities in the specified order. The
 * result returned by getDistance() is used by GeneticAlgorithm.calcFitness.
 * 
 * @author bkanber
 *
 */

public class Allocation {
	final static int m = 32;// number of computational units
	final static int n = 30;// number of components
	
	double R[][] = {{100, 256, 50},
			{150, 640, 25},
			{150, 640, 25},
			{100, 256, 15},
			{100, 256, 50},
			{150, 640, 25},
			{150, 640, 25},
			{100, 256, 15},
			{100, 256, 50},
			{150, 640, 25},
			{150, 640, 25},
			{100, 256, 15},
			{100, 256, 50},
			{150, 640, 25},
			{150, 640, 25},
			{100, 256, 15},
			{100, 256, 50},
			{150, 640, 25},
			{150, 640, 25},
			{100, 256, 15},
			{100, 256, 50},
			{150, 640, 25},
			{150, 640, 25},
			{100, 256, 15},
			{100, 256, 50},
			{150, 640, 25},
			{150, 640, 25},
			{100, 256, 15},
			{100, 256, 50},
			{150, 640, 25},
			{150, 640, 25},
			{100, 256, 15}}; 
	
	double Tcpu[][] = {{10,90,90,55,70, 55, 50, 15,70, 10, 72, 70,20, 30, 20, 40, 50, 10, 50, 40,15, 10, 90, 72, 10, 10, 70, 40, 15, 33, 72, 72},
			 {10,90,90,55,70, 55, 50, 15,70, 10, 72, 70,20, 30, 20, 40, 50, 10, 50, 40,15, 10, 90, 72, 10, 10, 70, 40, 15, 33, 72, 72},
			 {10,90,90,55,70, 55, 50, 15,70, 10, 72, 70,20, 30, 20, 40, 50, 10, 50, 40,15, 10, 90, 72, 10, 10, 70, 40, 15, 33, 72, 72},
			 
			 {50,20,20,72,20, 20, 90, 10,72, 33, 40, 40,10, 55, 90, 72, 20, 55, 15, 20, 40, 10, 20, 40, 15, 40, 20, 20, 20, 20, 10, 55},
			 {50,20,20,72,20, 20, 90, 10,72, 33, 40, 40,10, 55, 90, 72, 20, 55, 15, 20, 40, 10, 20, 40, 15, 40, 20, 20, 20, 20, 10, 55},
			 {50,20,20,72,20, 20, 90, 10,72, 33, 40, 40,10, 55, 90, 72, 20, 55, 15, 20, 40, 10, 20, 40, 15, 40, 20, 20, 20, 20, 10, 55},
			 
			 {30,20,20,72,20, 10, 20, 50, 15, 15, 20, 10,72, 10, 20, 90, 33, 20, 70, 70, 10, 20, 55, 70, 20, 55, 10, 20, 20, 40, 90, 20},
			 {30,20,20,72,20, 10, 20, 50, 15, 15, 20, 10,72, 10, 20, 90, 33, 20, 70, 70, 10, 20, 55, 70, 20, 55, 10, 20, 20, 40, 90, 20},
			 {30,20,20,72,20, 10, 20, 50, 15, 15, 20, 10,72, 10, 20, 90, 33, 20, 70, 70, 10, 20, 55, 70, 20, 55, 10, 20, 20, 40, 90, 20},
			 
			 {10,40,40,72,70, 50, 10, 72, 10, 20, 50, 70,15, 40, 90, 55, 20, 10, 20, 20, 30, 70, 20, 72, 50, 90, 20, 70, 70, 10, 40, 20},
			 {10,40,40,72,70, 50, 10, 72, 10, 20, 50, 70,15, 40, 90, 55, 20, 10, 20, 20, 30, 70, 20, 72, 50, 90, 20, 70, 70, 10, 40, 20},
			 {10,40,40,72,70, 50, 10, 72, 10, 20, 50, 70,15, 40, 90, 55, 20, 10, 20, 20, 30, 70, 20, 72, 50, 90, 20, 70, 70, 10, 40, 20},
			 
			 {20,40,40,72,40, 15, 70, 90,72, 10, 50, 20,72, 50, 10, 20, 10, 72, 70, 15, 72, 10, 10, 90, 20, 72, 72, 50, 90, 20, 90, 30},
			 {20,40,40,72,40, 15, 70, 90,72, 10, 50, 20,72, 50, 10, 20, 10, 72, 70, 15, 72, 10, 10, 90, 20, 72, 72, 50, 90, 20, 90, 30},
			 {20,40,40,72,40, 15, 70, 90,72, 10, 50, 20,72, 50, 10, 20, 10, 72, 70, 15, 72, 10, 10, 90, 20, 72, 72, 50, 90, 20, 90, 30},
			 
			 {20,50,50,55,72, 10, 55, 40,20, 90, 20, 55,20, 10, 20, 10, 55, 20, 40, 50, 55, 40, 20, 90, 90, 72, 72, 33, 10, 50, 70, 10},
			 {20,50,50,55,72, 10, 55, 40,20, 90, 20, 55,20, 10, 20, 10, 55, 20, 40, 50, 55, 40, 20, 90, 90, 72, 72, 33, 10, 50, 70, 10},
			 {20,50,50,55,72, 10, 55, 40,20, 90, 20, 55,20, 10, 20, 10, 55, 20, 40, 50, 55, 40, 20, 90, 90, 72, 72, 33, 10, 50, 70, 10},
			 
			 {90,20,20,15,20, 33, 15, 40,20, 15, 20, 40,10, 40, 20, 50, 40, 72, 72, 90, 33, 20, 20, 40, 10, 20, 40, 90, 15, 20, 40, 20},
			 {90,20,20,15,20, 33, 15, 40,20, 15, 20, 40,10, 40, 20, 50, 40, 72, 72, 90, 33, 20, 20, 40, 10, 20, 40, 90, 15, 20, 40, 20},
			 {90,20,20,15,20, 33, 15, 40,20, 15, 20, 40,10, 40, 20, 50, 40, 72, 72, 90, 33, 20, 20, 40, 10, 20, 40, 90, 15, 20, 40, 20},
			 
			 {20,10,10,70,10, 90, 90, 20,10, 72, 20, 50,15, 20, 90, 50, 15, 90, 20, 40, 20, 72, 15, 15, 10, 55, 15, 20, 72, 72, 50, 15},
			 {20,10,10,70,10, 90, 90, 20,10, 72, 20, 50,15, 20, 90, 50, 15, 90, 20, 40, 20, 72, 15, 15, 10, 55, 15, 20, 72, 72, 50, 15},
			 {20,10,10,70,10, 90, 90, 20,10, 72, 20, 50,15, 20, 90, 50, 15, 90, 20, 40, 20, 72, 15, 15, 10, 55, 15, 20, 72, 72, 50, 15},
			 
			 {20,10,10,70,20, 30, 20, 20,10, 20, 20, 90,10, 33, 70, 20, 20, 10, 10, 10, 10, 10, 20, 50, 40, 20, 10, 20, 70, 10, 10, 20},
			 {20,10,10,70,20, 30, 20, 20,10, 20, 20, 90,10, 33, 70, 20, 20, 10, 10, 10, 10, 10, 20, 50, 40, 20, 10, 20, 70, 10, 10, 20},

			 
			 {20,15,15,70,10, 10, 72, 20,10, 55, 20, 90,70, 15, 20, 72, 90, 20, 30, 10, 20, 70, 90, 50, 70, 10, 30, 20, 50, 10, 10, 55},
			 {20,15,15,70,10, 10, 72, 20,10, 55, 20, 90,70, 15, 20, 72, 90, 20, 30, 10, 20, 70, 90, 50, 70, 10, 30, 20, 50, 10, 10, 55},

			 
			 {90,10,10,33,20, 72, 40, 10,40, 10, 90, 30,10, 70, 40, 20, 72, 20, 10, 90, 50, 10, 20, 20, 15, 10, 90, 50, 90, 40, 20, 20},
			 {90,10,10,33,20, 72, 40, 10,40, 10, 90, 30,10, 70, 40, 20, 72, 20, 10, 90, 50, 10, 20, 20, 15, 10, 90, 50, 90, 40, 20, 20}
			 
			 
			};
			        
			     
	
	double Tmemory[][] = {{48,256,256,128,128, 48, 148, 168,256, 96, 148, 64,148, 256, 48, 64, 148, 64, 148, 64, 168, 168, 32, 96, 32, 96, 32, 32, 96, 256, 168, 148},
			 {48,256,256,128,128, 48, 148, 168,256, 96, 148, 64,148, 256, 48, 64, 148, 64, 148, 64, 168, 168, 32, 96, 32, 96, 32, 32, 96, 256, 168, 148},
			 {48,256,256,128,128, 48, 148, 168,256, 96, 148, 64,148, 256, 48, 64, 148, 64, 148, 64, 168, 168, 32, 96, 32, 96, 32, 32, 96, 256, 168, 148},
			 
			 {128,256,256,148,64, 48, 64, 96,148, 64, 64, 148,168, 168, 64, 64, 96, 48, 148, 64, 148, 48, 256, 32, 32, 168, 64, 148, 96, 256, 256, 128},
			 {128,256,256,148,64, 48, 64, 96,148, 64, 64, 148,168, 168, 64, 64, 96, 48, 148, 64, 148, 48, 256, 32, 32, 168, 64, 148, 96, 256, 256, 128},
			 {128,256,256,148,64, 48, 64, 96,148, 64, 64, 148,168, 168, 64, 64, 96, 48, 148, 64, 148, 48, 256, 32, 32, 168, 64, 148, 96, 256, 256, 128},

			 {64,256,256,148,256, 168, 96, 148,256, 128, 64, 128,148, 128, 128, 32, 148, 148, 168, 148, 256, 64, 128, 64, 168, 148, 148, 48, 168, 32, 148, 256},
			 {64,256,256,148,256, 168, 96, 148,256, 128, 64, 128,148, 128, 128, 32, 148, 148, 168, 148, 256, 64, 128, 64, 168, 148, 148, 48, 168, 32, 148, 256},
			 {64,256,256,148,256, 168, 96, 148,256, 128, 64, 128,148, 128, 128, 32, 148, 148, 168, 148, 256, 64, 128, 64, 168, 148, 148, 48, 168, 32, 148, 256},

			 {48,168,168,148,128, 168, 148, 168,64, 32, 148, 148,96, 168, 148, 168, 128, 128, 128, 32, 168, 148, 48, 148, 148, 64, 256, 148, 168, 148, 168, 64},
			 {48,168,168,148,128, 168, 148, 168,64, 32, 148, 148,96, 168, 148, 168, 128, 128, 128, 32, 168, 148, 48, 148, 148, 64, 256, 148, 168, 148, 168, 64}, 
			 {48,168,168,148,128, 168, 148, 168,64, 32, 148, 148,96, 168, 148, 168, 128, 128, 128, 32, 168, 148, 48, 148, 148, 64, 256, 148, 168, 148, 168, 64},

			 {64,168,168,148,48, 148, 64, 256,168, 48, 168, 96,128, 96, 256, 64, 32, 168, 256, 256, 148, 96, 148, 168, 64, 64, 128, 48, 32, 48, 64, 64},
			 {64,168,168,148,48, 148, 64, 256,168, 48, 168, 96,128, 96, 256, 64, 32, 168, 256, 256, 148, 96, 148, 168, 64, 64, 128, 48, 32, 48, 64, 64},
			 {64,168,168,148,48, 148, 64, 256,168, 48, 168, 96,128, 96, 256, 64, 32, 168, 256, 256, 148, 96, 148, 168, 64, 64, 128, 48, 32, 48, 64, 64},
			 
			 {64,168,168,64,168, 64, 64, 168,96, 32, 32, 148,148, 256, 32, 32, 32, 148, 256, 64, 148, 64, 128, 32, 96, 48, 168, 256, 128, 64, 64, 48},
			 {64,168,168,64,168, 64, 64, 168,96, 32, 32, 148,148, 256, 32, 32, 32, 148, 256, 64, 148, 64, 128, 32, 96, 48, 168, 256, 128, 64, 64, 48},
			 {64,168,168,64,168, 64, 64, 168,96, 32, 32, 148,148, 256, 32, 32, 32, 148, 256, 64, 148, 64, 128, 32, 96, 48, 168, 256, 128, 64, 64, 48},

			 {168,128,128,64,32, 96, 168, 256,256, 48, 32, 256,148, 64, 48, 48, 64, 96, 32, 148, 148, 48, 32, 256, 128, 64, 48, 168, 168, 128, 32, 64},
			 {168,128,128,64,32, 96, 168, 256,256, 48, 32, 256,148, 64, 48, 48, 64, 96, 32, 148, 148, 48, 32, 256, 128, 64, 48, 168, 168, 128, 32, 64},
			 {168,128,128,64,32, 96, 168, 256,256, 48, 32, 256,148, 64, 48, 48, 64, 96, 32, 148, 148, 48, 32, 256, 128, 64, 48, 168, 168, 128, 32, 64},

			 {148,96,96,148,32, 256, 148, 32,64, 148, 256, 168,168, 168, 32, 148, 168, 48, 168, 168, 148, 64, 256, 128, 256, 148, 64, 128, 48, 168, 48, 148},
			 {148,96,96,148,32, 256, 148, 32,64, 148, 256, 168,168, 168, 32, 148, 168, 48, 168, 168, 148, 64, 256, 128, 256, 148, 64, 128, 48, 168, 48, 148},
			 {148,96,96,148,32, 256, 148, 32,64, 148, 256, 168,168, 168, 32, 148, 168, 48, 168, 168, 148, 64, 256, 128, 256, 148, 64, 128, 48, 168, 48, 148},

			 {48,32,32,148,64, 128, 148, 148,256, 48, 168, 168,148, 64, 148, 48, 48, 96, 168, 64, 48, 168, 96, 256, 256, 168, 168, 148, 128, 148, 96, 64},
			 {48,32,32,148,64, 128, 148, 148,256, 48, 168, 168,148, 64, 148, 48, 48, 96, 168, 64, 48, 168, 96, 256, 256, 168, 168, 148, 128, 148, 96, 64},

			 {48,32,32,148,148, 48, 256, 128,48, 128, 168, 168,96, 128, 256, 168, 256, 64, 256, 48, 168, 168, 64, 128, 168, 168, 96, 256, 168, 256, 256, 148 },
			 {48,32,32,148,148, 48, 256, 128,48, 128, 168, 168,96, 128, 256, 168, 256, 64, 256, 48, 168, 168, 64, 128, 168, 168, 96, 256, 168, 256, 256, 148},

			 {168,64,64,96,256, 64, 32, 168,148, 128, 168, 64,256, 64, 256, 168, 168, 128, 256, 168, 64, 256, 168, 64, 148, 128, 64, 256, 148, 148, 32, 168},
			 {168,64,64,96,256, 64, 32, 168,148, 128, 168, 64,256, 64, 256, 168, 168, 128, 256, 168, 64, 256, 168, 64, 148, 128, 64, 256, 148, 148, 32, 168}};
			        
	
	double Tpower[][] = {{2,18,18,11,11, 14, 4, 3,14, 2, 4, 3,14, 14, 7, 18, 4, 4, 14, 2, 4, 8, 4, 14, 18, 14, 14, 18, 8, 7, 4, 14},
			 {2,18,18,11,11, 14, 4, 3,14, 2, 4, 3,14, 14, 7, 18, 4, 4, 14, 2, 4, 8, 4, 14, 18, 14, 14, 18, 8, 7, 4, 14},
			 {2,18,18,11,11, 14, 4, 3,14, 2, 4, 3,14, 14, 7, 18, 4, 4, 14, 2, 4, 8, 4, 14, 18, 14, 14, 18, 8, 7, 4, 14},
			 
			 {10,4,4,14,2, 4, 14, 4,8, 2, 4, 4,3, 10, 4, 8, 2, 14, 2, 10, 4, 10, 18, 18, 7, 14, 4, 4, 4, 14, 4, 14},
			 {10,4,4,14,2, 4, 14, 4,8, 2, 4, 4,3, 10, 4, 8, 2, 14, 2, 10, 4, 10, 18, 18, 7, 14, 4, 4, 4, 14, 4, 14},
			 {10,4,4,14,2, 4, 14, 4,8, 2, 4, 4,3, 10, 4, 8, 2, 14, 2, 10, 4, 10, 18, 18, 7, 14, 4, 4, 4, 14, 4, 14},
		

			 {6,4,4,14,4, 18, 4, 10,11, 3, 2, 14,10, 3, 14, 4, 8, 8, 14, 8, 2, 4, 14, 14, 4, 2, 4, 4, 6, 2, 4, 2},
			 {6,4,4,14,4, 18, 4, 10,11, 3, 2, 14,10, 3, 14, 4, 8, 8, 14, 8, 2, 4, 14, 14, 4, 2, 4, 4, 6, 2, 4, 2},
			 {6,4,4,14,4, 18, 4, 10,11, 3, 2, 14,10, 3, 14, 4, 8, 8, 14, 8, 2, 4, 14, 14, 4, 2, 4, 4, 6, 2, 4, 2},


			 {2,8,8,14,18, 6, 4, 2,14, 4, 4, 2,4, 11, 2, 4, 3, 14, 18, 14, 10, 8, 3, 3, 4, 14, 2, 14, 18, 3, 14, 11},
			 {2,8,8,14,18, 6, 4, 2,14, 4, 4, 2,4, 11, 2, 4, 3, 14, 18, 14, 10, 8, 3, 3, 4, 14, 2, 14, 18, 3, 14, 11},
			 {2,8,8,14,18, 6, 4, 2,14, 4, 4, 2,4, 11, 2, 4, 3, 14, 18, 14, 10, 8, 3, 3, 4, 14, 2, 14, 18, 3, 14, 11},


			 {4,8,8,14,14, 7, 8, 14,18, 4, 4, 3,2, 2, 4, 4, 4, 2, 2, 18, 14, 14, 18, 2, 14, 10, 3, 2, 3, 8, 2, 2},
			 {4,8,8,14,14, 7, 8, 14,18, 4, 4, 3,2, 2, 4, 4, 4, 2, 2, 18, 14, 14, 18, 2, 14, 10, 3, 2, 3, 8, 2, 2},
			 {4,8,8,14,14, 7, 8, 14,18, 4, 4, 3,2, 2, 4, 4, 4, 2, 2, 18, 14, 14, 18, 2, 14, 10, 3, 2, 3, 8, 2, 2},


			 {4,10,10,11,3, 4, 2, 4,11, 14, 4, 18,4, 4, 2, 8, 6, 4, 18, 2, 4, 4, 6, 2, 10, 2, 11, 2, 18, 14, 10, 4},
			 {4,10,10,11,3, 4, 2, 4,11, 14, 4, 18,4, 4, 2, 8, 6, 4, 18, 2, 4, 4, 6, 2, 10, 2, 11, 2, 18, 14, 10, 4},
			 {4,10,10,11,3, 4, 2, 4,11, 14, 4, 18,4, 4, 2, 8, 6, 4, 18, 2, 4, 4, 6, 2, 10, 2, 11, 2, 18, 14, 10, 4},

			 {18,4,4,3,14, 18, 4, 8,2, 4, 10, 4,18, 14, 4, 18, 2, 4, 3, 4, 7, 10, 18, 8, 6, 4, 8, 10, 4, 2, 14, 10},
			 {18,4,4,3,14, 18, 4, 8,2, 4, 10, 4,18, 14, 4, 18, 2, 4, 3, 4, 7, 10, 18, 8, 6, 4, 8, 10, 4, 2, 14, 10},
			 {18,4,4,3,14, 18, 4, 8,2, 4, 10, 4,18, 14, 4, 18, 2, 4, 3, 4, 7, 10, 18, 8, 6, 4, 8, 10, 4, 2, 14, 10},

			 {4,2,2,14,10, 4, 2, 2,8, 7, 10, 4,8, 10, 4, 11, 11, 7, 2, 14, 11, 4, 14, 4, 8, 18, 8, 18, 18, 2, 18, 2},
			 {4,2,2,14,10, 4, 2, 2,8, 7, 10, 4,8, 10, 4, 11, 11, 7, 2, 14, 11, 4, 14, 4, 8, 18, 8, 18, 18, 2, 18, 2},
			 {4,2,2,14,10, 4, 2, 2,8, 7, 10, 4,8, 10, 4, 11, 11, 7, 2, 14, 11, 4, 14, 4, 8, 18, 8, 18, 18, 2, 18, 2},

			 {4,2,2,14,4, 2, 8, 10,2, 18, 14, 14,14, 2, 14, 2, 4, 4, 10, 10, 4, 3, 2, 8, 2, 3, 2, 4, 4, 8, 14, 4},
			 {4,2,2,14,4, 2, 8, 10,2, 18, 14, 14,14, 2, 14, 2, 4, 4, 10, 10, 4, 3, 2, 8, 2, 3, 2, 4, 4, 8, 14, 4},

			 {4,3,3,14,14, 2, 2, 8,8, 14, 10, 6,4, 6, 3, 2, 8, 18, 3, 4, 2, 2, 2, 14, 14, 3, 11, 2, 8, 4, 4, 11},
			 {4,3,3,14,14, 2, 2, 8,8, 14, 10, 6,4, 6, 3, 2, 8, 18, 3, 4, 2, 2, 2, 14, 14, 3, 11, 2, 8, 4, 4, 11},

			 {18,2,2,7,18, 11, 14, 3,2, 8, 18, 2,8, 18, 14, 2, 4, 11, 14, 4, 4, 4, 2, 11, 4, 8, 4, 4,  2, 3, 10, 4},
			 {18,2,2,7,18, 11, 14, 3,2, 8, 18, 2,8, 18, 14, 2, 4, 11, 14, 4, 4, 4, 2, 11, 4, 8, 4, 4,  2, 3, 10, 4}
			};
	
	double F[] = {0.1557,0.0856,0.7095};
	
	int allocation[];
	
	public Allocation(Individual individual) {
		// Get individual's chromosome
		allocation = individual.getChromosome();
		
	}
	
	public Allocation(int[] chromosome) {
		// Get individual's chromosome
		allocation = chromosome;
		
	}
	

	public boolean isValid() {
		/* check allocation and anti-allocation constraints */
		if(allocation[6]!=3 ) return false;
		if(allocation[3]==0 ) return false;
		for(int i= 0; i<n; i++) if(allocation[i]<0 || allocation[i]>=m) return false;
		
		/* check resource capacity constraints */
		for(int compUnit= 0; compUnit <m; compUnit++)
			if(!checkCPU(compUnit) || !checkMemory(compUnit) || !checkPower(compUnit)) return false;
		
		return true;
	}
	
	private boolean checkCPU(int compUnit) {
		double capacity = R[compUnit][0];
		
		double tc = 0.0;
		
		for(int comp=0; comp < n; comp ++)
			if(allocation[comp]==compUnit)tc += Tcpu[comp][allocation[comp]];
		
		if(tc > capacity) return false;
		else return true;
	}
	
	private boolean checkMemory(int compUnit) {
		double capacity = R[compUnit][1];
		
		double tc = 0.0;
		
		for(int comp=0; comp < n; comp ++)
			if(allocation[comp]==compUnit) tc += Tmemory[comp][allocation[comp]];
		
		if(tc > capacity) return false;
		else return true;
	}
	
	private boolean checkPower(int compUnit) {
		double capacity = R[compUnit][2];
		
		double tc = 0.0;
		
		for(int comp=0; comp < n; comp ++)
			if(allocation[comp]==compUnit) tc += Tpower[comp][allocation[comp]];
		
		if(tc > capacity) return false;
		else return true;
	}
	
	public double cost() {
		/* check resource capacity constraints */
		double cpuc=0.0, memoryc=0.0, powerc=0.0;
		for(int compUnit= 0; compUnit <m; compUnit++) {
			cpuc += consumedCPU(compUnit);
			memoryc += consumedMemory(compUnit);
			powerc += consumedPower(compUnit);
		}
		if(!this.isValid()) return Integer.MAX_VALUE;
		return cpuc*F[0] + 	memoryc*F[1] + powerc*F[2];
	}
	
	private double consumedCPU(int compUnit) {
		
		
		double tc = 0.0;
		
		for(int comp=0; comp < n; comp ++)
			if(allocation[comp]==compUnit) tc += Tcpu[comp][allocation[comp]];
		
		return tc;
	}
	
	private double consumedMemory(int compUnit) {
		
		
		double tc = 0.0;
		
		for(int comp=0; comp < n; comp ++)
			if(allocation[comp]==compUnit) tc += Tmemory[comp][allocation[comp]];
		
		return tc;
	}
	
	private double consumedPower(int compUnit) {
		
		
		double tc = 0.0;
		
		for(int comp=0; comp < n; comp ++)
			if(allocation[comp]==compUnit) tc += Tpower[comp][allocation[comp]];
		
		return tc;
	}
	
	@Override
	public String toString() {
		return Arrays.toString(allocation);
	}
	
	/* extra methods to find optimal solution by exhaustive search */
	double optimalCost = Integer.MAX_VALUE;
	int[] optimal_allocation = null;
	int num_allocations = 0;
	int num_feasible_allocations = 0;
	
	public static int getNumberOfAllocations() {
		int tmpA[] = {0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0};
		Allocation a= new Allocation(tmpA);
		
		a.num_allocations = 0;
		a.enumerate(tmpA, -1, 0);
		return a.num_allocations;
	}
	
	public static int getNumberOfFeasibleAllocations() {
		int tmpA[] = {0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0};
		Allocation a= new Allocation(tmpA);
		
		a.num_feasible_allocations = 0;
		a.enumerate(tmpA, -1, 0);
		return a.num_feasible_allocations;
	}
	
	public static double findOptimalCost() {
		int tmpA[] = {0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0};
		Allocation a= new Allocation(tmpA);
		
		a.enumerate(tmpA, -1, 0);
		return a.optimalCost;
	}
	
	public static int[] findOptimalAllocation() {
		int tmpA[] = {0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0};
		Allocation a= new Allocation(tmpA);
		
		a.enumerate(tmpA, -1, 0);
		return a.optimal_allocation;
	}
	
	private void enumerate(int a[], int level, int j) {
		if(level==-1) {
			for(int i=0; i<m; i++) {
				a[0]=i;
				for(int x=0; x<m; x++)
					enumerate(a, 1, x);
			}
		} else
		if(level==n-1) {
			a[level]=j;
			num_allocations++;
			if(new Allocation(a).isValid()) {
				num_feasible_allocations++;
				if(new Allocation(a).cost()< optimalCost) {
					optimalCost = new Allocation(a).cost();
					optimal_allocation = a.clone();
				}			
			}
		}else {
			a[level]=j;
			for(int x=0; x<m; x++)
				enumerate(a, level+1, x);
		}
	}
	
}